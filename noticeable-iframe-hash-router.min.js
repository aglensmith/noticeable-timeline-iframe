!function(){function i(){if(r("Starting iframe handling"),function(){var e=window.noticeableSettings.iframe.selector,i=window.noticeableSettings.iframe.timelineUrl;if(r("Noticeable iframe settings",window.noticeableSettings.iframe),!e)return console.error("Missing iframe selector definition."),!1;if(!i)return console.error("Missing timeline URL definition."),!1;return!0}()){var a=document.querySelector(window.noticeableSettings.iframe.selector);if(a){if(a.setAttribute("scrolling","no"),a.style.height="900px",window.addEventListener("message",function(e){try{var i=JSON.parse(e.data)}catch(e){}var t,n,o;i&&("noticeable-timeline-location"===i.type?(r("Received new timeline location",i),n=window.noticeableSettings.iframe.timelineUrl,o="https://timeline.noticeable.io/",r("Setting hash location to",t=0===n.lastIndexOf(o,0)?function(e){var i=0;0===e.indexOf("/")&&(i=1);return-1<(i=e.indexOf("/",i))?e.substr(i+1):""}(i.path):i.path),location.hash=t||""):"noticeable-timeline-dimensions"===i.type&&(r("New iframe dimensions received",i),a.style.height=i.height+"px"))},!1),window.noticeableSettings.iframe.singlePageApp){var e=location.href;setInterval(function(){e&&location.href!==e&&(r("Location change detected",location.href),t(window.noticeableSettings.iframe.selector,window.noticeableSettings.iframe.timelineUrl),e=location.href)},window.noticeableSettings.iframe.pageChangeCheckInterval||240)}t(window.noticeableSettings.iframe.selector,window.noticeableSettings.iframe.timelineUrl)}else console.log("Iframe not found on the current page with selector",selector)}}function t(e,i){var t=document.querySelector(e);if(location.hash){var n=function(e){var i=e.split("?"),t=i[0]+location.hash.replace("#","/");1<i.length&&(t+="?"+i[1]);return t}(i);r("Updating timeline URL from hash",n),t.src=n}else r("Updating timeline URL using root",i),t.src=i}function r(e,i){window.noticeableSettings.iframe&&window.noticeableSettings.iframe.debug&&(i?console.log("[DEBUG] "+e,i):console.log("[DEBUG] "+e))}window.noticeableSettings.iframe.singlePageApp=void 0===window.noticeableSettings.iframe.singlePageApp||null===window.noticeableSettings.iframe.singlePageApp||window.noticeableSettings.iframe.singlePageApp,"complete"===document.readyState||"interactive"===document.readyState?i():document.addEventListener("DOMContentLoaded",function(e){i()})}();