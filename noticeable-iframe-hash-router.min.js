!function(){function n(){if(o("Starting iframe handling"),function(){var e=window.noticeableSettings.iframe.selector,n=window.noticeableSettings.iframe.timelineUrl;if(o("Noticeable iframe settings",window.noticeableSettings.iframe),!e)return console.error("Missing iframe selector definition."),!1;if(!n)return console.error("Missing timeline URL definition."),!1;return!0}()){window.addEventListener("message",function(e){try{var n=JSON.parse(e.data)}catch(e){}if(n&&"noticeable-timeline-location"===n.type){var t=function(e){var n=0;0===e.indexOf("/")&&(n=1);return-1<(n=e.indexOf("/",n))?e.substr(n+1):""}(n.path);location.hash=t||""}},!1);var e=location.href;setInterval(function(){e&&location.href!==e&&(o("Location change detected",location.href),t(window.noticeableSettings.iframe.selector,window.noticeableSettings.iframe.timelineUrl),e=location.href)},window.noticeableSettings.iframe.pageChangeCheckInterval||240),t(window.noticeableSettings.iframe.selector,window.noticeableSettings.iframe.timelineUrl)}}function t(e,n){var t=document.querySelector(e);if(t)if(location.hash){var i=function(e){var n=e.split("?"),t=n[0]+location.hash.replace("#","/");1<n.length&&(t+="?"+n[1]);return t}(n);o("Updating timeline URL",i),t.src=i}else o("Updating timeline URL",n),t.src=n;else o("Iframe not found on the current page with selector",e)}function o(e,n){window.noticeableSettings.iframe&&window.noticeableSettings.iframe.debug&&(n?console.log("[DEBUG] "+e,n):console.log("[DEBUG] "+e))}"complete"===document.readyState||"interactive"===document.readyState?n():document.addEventListener("DOMContentLoaded",function(e){n()})}();