!function(){function t(){if(o("Starting iframe handling"),function(){var e=window.noticeableSettings.iframe.selector,t=window.noticeableSettings.iframe.timelineUrl;if(o("Noticeable iframe settings",window.noticeableSettings.iframe),!e)return console.error("Missing iframe selector definition."),!1;if(!t)return console.error("Missing timeline URL definition."),!1;return!0}()){window.addEventListener("message",function(e){try{var t=JSON.parse(e.data)}catch(e){}if(t)if("noticeable-timeline-location"===t.type){var i=function(e){var t=0;0===e.indexOf("/")&&(t=1);return-1<(t=e.indexOf("/",t))?e.substr(t+1):""}(t.path);location.hash=i||""}else if("noticeable-timeline-dimensions"===t.type){document.querySelector(window.noticeableSettings.iframe.selector).style.height=t.height+"px"}},!1);var e=location.href;setInterval(function(){e&&location.href!==e&&(o("Location change detected",location.href),i(window.noticeableSettings.iframe.selector,window.noticeableSettings.iframe.timelineUrl),e=location.href)},window.noticeableSettings.iframe.pageChangeCheckInterval||240),i(window.noticeableSettings.iframe.selector,window.noticeableSettings.iframe.timelineUrl)}}function i(e,t){var i=document.querySelector(e);if(i)if(location.hash){var n=function(e){var t=e.split("?"),i=t[0]+location.hash.replace("#","/");1<t.length&&(i+="?"+t[1]);return i}(t);o("Updating timeline URL",n),i.src=n}else o("Updating timeline URL",t),i.src=t;else o("Iframe not found on the current page with selector",e)}function o(e,t){window.noticeableSettings.iframe&&window.noticeableSettings.iframe.debug&&(t?console.log("[DEBUG] "+e,t):console.log("[DEBUG] "+e))}"complete"===document.readyState||"interactive"===document.readyState?t():document.addEventListener("DOMContentLoaded",function(e){t()})}();